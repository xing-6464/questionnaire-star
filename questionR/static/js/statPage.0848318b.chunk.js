"use strict";(self.webpackChunkquestionnaire_star=self.webpackChunkquestionnaire_star||[]).push([[868],{47714:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var s=n(65043),i=n(42522),c=n(42919),o=n(86491),r=n(89421),a=n(48371),l=n(73216),d=n(80788);const p="Stat_container__jXvAP",x="Stat_content-wrapper__RP46h",u="Stat_content__Pyk3M",m="Stat_left__UxP5F",j="Stat_main__YPKSS",h="Stat_right__rKDCo",_="StatHeader_header-wrapper__BPbno",v="StatHeader_header__sWITa",y="StatHeader_left__-k0g+",C="StatHeader_right__6sqyK",A="StatHeader_main__IrU3a";var S=n(29752),f=n(16569),g=n(39520),T=n(10898),k=n(25389),I=n(96651),N=n(36282),P=n(9025),w=n(66885),L=n(682),q=n(70579);const{Title:H}=S.A;const b=function(){const e=(0,l.Zp)(),{id:t}=(0,l.g)(),{title:n,isPublished:i}=(0,a.A)(),c=s.useRef(null);function o(){const e=c.current;null!=e&&(e.select(),document.execCommand("copy"),f.Ay.success("\u62f7\u8d1d\u6210\u529f"))}const d=(0,s.useMemo)((()=>{if(!i)return null;const e="http://question.ixing.xyz/question/".concat(t),n=(0,q.jsx)("div",{style:{textAlign:"center"},children:(0,q.jsx)(g.A,{value:e,size:150})});return(0,q.jsxs)(T.A,{children:[(0,q.jsx)(k.A,{value:e,style:{width:"300px"},ref:c}),(0,q.jsx)(I.A,{title:"\u62f7\u8d1d\u94fe\u63a5",children:(0,q.jsx)(r.Ay,{icon:(0,q.jsx)(P.A,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),onClick:o})}),(0,q.jsx)(N.A,{content:n,children:(0,q.jsx)(r.Ay,{icon:(0,q.jsx)(w.A,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0})})})]})}),[t,i]);return(0,q.jsx)("div",{className:_,children:(0,q.jsxs)("div",{className:v,children:[(0,q.jsx)("div",{className:y,children:(0,q.jsxs)(T.A,{children:[(0,q.jsx)(r.Ay,{type:"link",icon:(0,q.jsx)(L.A,{onPointerEnterCapture:void 0,onPointerLeaveCapture:void 0}),onClick:()=>e(-1),children:"\u8fd4\u56de"}),(0,q.jsx)(H,{children:n})]})}),(0,q.jsx)("div",{className:A,children:d}),(0,q.jsx)("div",{className:C,children:(0,q.jsx)(r.Ay,{type:"primary",onClick:()=>e("/question/edit/".concat(t)),children:"\u7f16\u8f91\u95ee\u5377"})})]})})};var z=n(63393);const E="ComponentList_container__HTUv4",F="ComponentList_component-wrapper__hRcyH",K="ComponentList_selected__qWbqI",R="ComponentList_component__yKunt";var U=n(82925),D=n(98139),M=n.n(D);const W=function(e){const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:s}=e,{componentList:i}=(0,z.A)();return(0,q.jsx)("div",{className:E,children:i.filter((e=>!e.isHidden)).map((e=>{const{fe_id:i,props:c,type:o}=e,r=(0,U.T)(o);if(null==r)return null;const{Component:a}=r,l=F,d=K,p=M()({[l]:!0,[d]:i===t});return(0,q.jsx)("div",{className:p,onClick:()=>{n(i),s(o)},children:(0,q.jsx)("div",{className:R,children:(0,q.jsx)(a,{...c})})},i)}))})};var Z=n(26998),B=n(55293);var X=n(35414),Y=n(51413);function G(){return(0,q.jsx)("div",{style:{textAlign:"center",marginTop:"60px"},children:(0,q.jsx)(c.A,{})})}var J=n(29515);const{Title:O}=S.A;const Q=function(e){const{selectedComponentId:t,setSelectedComponentId:n,setSelectedComponentType:i}=e,{id:c=""}=(0,l.g)(),[o,r]=(0,s.useState)(),[a,d]=(0,s.useState)([]),[p,x]=(0,s.useState)(1),[u,m]=(0,s.useState)(J.zv),{loading:j}=(0,Z.A)((async()=>await async function(e,t){const n="/api/stat/".concat(e);return await B.A.get(n,{params:t})}(c,{page:p,pageSize:u})),{refreshDeps:[c,p,u],onSuccess(e){const{total:t,list:n=[]}=e;r(t),d(n)}}),{componentList:h}=(0,z.A)(),_=h.map((e=>{const{fe_id:s,title:c,type:o,props:r={}}=e,a=r.title||c;return{title:(0,q.jsx)("div",{style:{cursor:"pointer"},onClick:()=>{n(s),i(o)},children:(0,q.jsx)("span",{style:{color:s===t?"#1890ff":"inherit"},children:a})}),dataIndex:s}})),v=a.map((e=>({...e,key:e._id}))),y=(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(X.A,{columns:_,dataSource:v,pagination:!1}),(0,q.jsx)("div",{style:{textAlign:"center",marginTop:"18px"},children:(0,q.jsx)(Y.A,{total:o,pageSize:u,current:p,onChange:e=>x(e),onShowSizeChange:(e,t)=>{x(e),m(t)}})})]});return(0,q.jsxs)("div",{children:[(0,q.jsxs)(O,{level:3,children:["\u7b54\u5377\u6570\u91cf\uff1a",!j&&o]}),j&&(0,q.jsx)(G,{}),!j&&y]})},{Title:V}=S.A;const $=function(e){const{selectedComponentId:t,selectedComponentType:n}=e,{id:i=""}=(0,l.g)(),[c,o]=s.useState([]),{run:r}=(0,Z.A)((async(e,t)=>await async function(e,t){const n="/api/stat/".concat(e,"/").concat(t);return await B.A.get(n)}(e,t)),{manual:!0,onSuccess(e){o(e.stat)}});return(0,s.useEffect)((()=>{t&&r(i,t)}),[i,t]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(V,{level:3,children:"\u7edf\u8ba1\u5217\u8868"}),(0,q.jsx)("div",{children:function(){if(!t)return(0,q.jsx)("div",{children:"\u672a\u4e2d\u7ec4\u4ef6"});const{StatComponent:e}=(0,U.T)(n)||{};return e?(0,q.jsx)(e,{stat:c}):(0,q.jsx)("div",{children:"\u8be5\u7ec4\u4ef6\u65e0\u7edf\u8ba1\u56fe\u8868"})}()})]})},ee=()=>{const e=(0,l.Zp)(),{loading:t}=(0,i.A)(),{isPublished:n}=(0,a.A)(),[_,v]=(0,s.useState)(""),[y,C]=(0,s.useState)("");(0,d.A)("\u95ee\u5377\u7edf\u8ba1");const A=()=>(0,q.jsx)("div",{style:{textAlign:"center",marginTop:"60px"},children:(0,q.jsx)(c.A,{})});return(0,q.jsxs)("div",{className:p,children:[(0,q.jsx)(b,{}),(0,q.jsx)("div",{className:x,children:t?(0,q.jsx)(A,{}):(0,q.jsx)("div",{className:u,children:"boolean"!==typeof n||n?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("div",{className:m,children:(0,q.jsx)(W,{selectedComponentId:_,setSelectedComponentId:v,setSelectedComponentType:C})}),(0,q.jsx)("div",{className:j,children:(0,q.jsx)(Q,{selectedComponentId:_,setSelectedComponentId:v,setSelectedComponentType:C})}),(0,q.jsx)("div",{className:h,children:(0,q.jsx)($,{selectedComponentId:_,selectedComponentType:y})})]}):(0,q.jsx)("div",{style:{flex:1},children:(0,q.jsx)(o.Ay,{status:"warning",title:"\u8be5\u9875\u9762\u672a\u53d1\u5e03",extra:(0,q.jsx)(r.Ay,{type:"primary",onClick:()=>e(-1),children:"\u8fd4\u56de"})})})})})]})}}}]);
//# sourceMappingURL=statPage.0848318b.chunk.js.map